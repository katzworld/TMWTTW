<html lang="en">
<head>
    <meta charset="utf-8" />
	 <meta http-equiv="refresh" content="10">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sufferers in Metaverse</title>
	</head>
<style>
html,body
 {
    margin: 10px;
	padding: 10px;
	color: white;
	font-size: 36px;
	background-color: black;
}
h1 {
    color: white;
    font-size: 72px;
}


</style>
<body>
    <h1>Metaverse Sufferer</h1>
	<hr>
	<div><span id = "total"></span></div>
	<div><span id = "suffer"></span></div>
	<script type="text/javascript">
const apiUrl = 'https://api.tmwstw.io/game_plots_with_players';	// URL to grab this stuff from

playIt();
	
async function getThing() {
		const xlabels = [];	
		const players = [];
		const response = await fetch(apiUrl,{mode: 'cors'})
		const data = await response.json();
		console.log(data)
		for (const [key, value] of Object.entries(data)) {
			xlabels.push(`${key}`)
			players.push(`${value}`)
		}
		return{xlabels,players}
	};

async function playIt() {
	const links = [];
	const vic = [];
	const opensea = [];
	const img = document.createElement("img");
	const data = await getThing();
	//console.log(data.xlabels,data.players);
	total.innerTEXT += `${data.xlabels.length} total suffer`;
	for (let i = 0; i < data.xlabels.length; i++) { 
		links.push(`<a href="https://opensea.io/assets/ethereum/0xeed10864e9fd813d12a0f40eb5f73ff2d31b2abb/${data.xlabels[i]}"><img src="https://meta.tmwstw.io/preview_plots_${data.xlabels[i]}.jpg" width="250" height="250"></a>`)
		vic.push(`occ ${data.players[i]}x `);
		suffer.innerHTML +=(`${links[i]} ${vic[i]} `)
	}
}
</script>
</body>
</html>
